"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.getDatabaseAccess = void 0;
const mongoose_data_access_1 = require("../database/mongoose/mongoose-data-access");
const sequelize_data_access_1 = require("../database/sequelize/sequelize-data-access");
const globals_1 = __importDefault(require("../globals"));
function getDatabaseAccess() {
    // Vous pouvez baser votre choix sur une variable d'environnement
    // ou d'autres critères de configuration.
    const useMongoose = globals_1.default.database.connectionString.includes('mongodb') ? true : false;
    if (useMongoose) {
        return new mongoose_data_access_1.MongooseDataAccess();
    }
    else {
        if (globals_1.default.database.dialect === 'sqlite' && !globals_1.default.database.storage) {
            throw Error('SQLite en mode mémoire nécessite un chemin de stockage');
        }
        return new sequelize_data_access_1.SequelizeDataAccess();
    }
}
exports.getDatabaseAccess = getDatabaseAccess;
